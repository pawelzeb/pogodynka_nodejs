using Microsoft.VisualStudio.TestTools.UnitTesting;
using Pogodynka.Model;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Text;
using System.Text.Json;
using System.Threading.Tasks;
using System.Windows.Forms;
using WebSocketSharp;

namespace Pogodynka.Tests
{
    [TestClass()]
    public class PogodynkaUnitTests
    {
        [TestMethod()]
        public void dateComparisonTest()
        {
            DateTime dt = new DateTime();
            DateTime dt1 = new DateTime();
            DateTime dt2 = new DateTime();
            dt1 = dt1.AddMinutes(224);
            dt2 = dt2.AddDays(1);
            
            Assert.AreEqual(dt.Date,dt1.Date);
            Assert.AreNotEqual(dt.Date,dt2.Date);
        }
        [TestMethod()]
        public void parseWeatherData()
        {
            string json = "{\"coord\":{\"lon\":21.0118,\"lat\":52.2298},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"base\":\"stations\",\"main\":{\"temp\":294.32,\"feels_like\":294.11,\"temp_min\":293.11,\"temp_max\":295.83,\"pressure\":1017,\"humidity\":62,\"sea_level\":1017,\"grnd_level\":1007},\"visibility\":10000,\"wind\":{\"speed\":1.54,\"deg\":0},\"clouds\":{\"all\":20},\"dt\":1757668850,\"sys\":{\"type\":2,\"id\":2032856,\"country\":\"PL\",\"sunrise\":1757649931,\"sunset\":1757696356},\"timezone\":7200,\"id\":756135,\"name\":\"Warsaw\",\"cod\":200}";

            var dataModel = JsonSerializer.Deserialize<WeatherModel>(json, new JsonSerializerOptions
            {
                PropertyNameCaseInsensitive = true
            });
            Assert.IsNotNull (dataModel);
            Assert.AreEqual(dataModel.Name, "Warsaw");
            Assert.AreEqual(dataModel.Main.Pressure, 1017);
            Assert.AreEqual(dataModel.Coord.Lat, 52.2298, 0.001);
            Assert.AreEqual(dataModel.Coord.Lon, 21.0118, 0.001);
            Assert.AreEqual(dataModel.Weather[0].Description, "few clouds");
            Assert.AreEqual(dataModel.Weather[0].Main, "Clouds");
            Assert.AreEqual(dataModel.Weather[0].Icon, "02d");
            Assert.AreEqual(dataModel.Main.Temp, 294.32, 0.001);
        }
        [TestMethod()]
        public void parseForecastData()
        {
            string json = "{\"cod\":\"200\",\"message\":0,\"cnt\":40,\"list\":[{\"dt\":1757678400,\"main\":{\"temp\":295.06,\"feels_like\":294.77,\"temp_min\":295.06,\"temp_max\":296.43,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":1007,\"humidity\":56,\"temp_kf\":-1.37},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"clouds\":{\"all\":14},\"wind\":{\"speed\":3.2,\"deg\":262,\"gust\":4.04},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-12 12:00:00\"},{\"dt\":1757689200,\"main\":{\"temp\":295.96,\"feels_like\":295.42,\"temp_min\":295.96,\"temp_max\":296.76,\"pressure\":1018,\"sea_level\":1018,\"grnd_level\":1008,\"humidity\":43,\"temp_kf\":-0.8},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"clouds\":{\"all\":13},\"wind\":{\"speed\":2.38,\"deg\":267,\"gust\":3.61},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-12 15:00:00\"},{\"dt\":1757700000,\"main\":{\"temp\":291.84,\"feels_like\":290.97,\"temp_min\":291.84,\"temp_max\":291.84,\"pressure\":1021,\"sea_level\":1021,\"grnd_level\":1009,\"humidity\":46,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":20},\"wind\":{\"speed\":0.28,\"deg\":337,\"gust\":0.55},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-12 18:00:00\"},{\"dt\":1757710800,\"main\":{\"temp\":289.79,\"feels_like\":288.95,\"temp_min\":289.79,\"temp_max\":289.79,\"pressure\":1022,\"sea_level\":1022,\"grnd_level\":1011,\"humidity\":55,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":73},\"wind\":{\"speed\":1.8,\"deg\":234,\"gust\":3.28},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-12 21:00:00\"},{\"dt\":1757721600,\"main\":{\"temp\":288.54,\"feels_like\":287.91,\"temp_min\":288.54,\"temp_max\":288.54,\"pressure\":1023,\"sea_level\":1023,\"grnd_level\":1011,\"humidity\":68,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":79},\"wind\":{\"speed\":1.69,\"deg\":244,\"gust\":4.15},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-13 00:00:00\"},{\"dt\":1757732400,\"main\":{\"temp\":288.77,\"feels_like\":288.29,\"temp_min\":288.77,\"temp_max\":288.77,\"pressure\":1023,\"sea_level\":1023,\"grnd_level\":1012,\"humidity\":73,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":84},\"wind\":{\"speed\":0.49,\"deg\":218,\"gust\":0.49},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-13 03:00:00\"},{\"dt\":1757743200,\"main\":{\"temp\":290.55,\"feels_like\":290.04,\"temp_min\":290.55,\"temp_max\":290.55,\"pressure\":1024,\"sea_level\":1024,\"grnd_level\":1012,\"humidity\":65,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":61},\"wind\":{\"speed\":1.44,\"deg\":122,\"gust\":2.04},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-13 06:00:00\"},{\"dt\":1757754000,\"main\":{\"temp\":295.11,\"feels_like\":294.67,\"temp_min\":295.11,\"temp_max\":295.11,\"pressure\":1024,\"sea_level\":1024,\"grnd_level\":1012,\"humidity\":50,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":70},\"wind\":{\"speed\":2.37,\"deg\":149,\"gust\":3.45},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-13 09:00:00\"},{\"dt\":1757764800,\"main\":{\"temp\":297.41,\"feels_like\":297.07,\"temp_min\":297.41,\"temp_max\":297.41,\"pressure\":1021,\"sea_level\":1021,\"grnd_level\":1010,\"humidity\":45,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":85},\"wind\":{\"speed\":3.21,\"deg\":131,\"gust\":6.1},\"visibility\":10000,\"pop\":0.2,\"rain\":{\"3h\":0.13},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-13 12:00:00\"},{\"dt\":1757775600,\"main\":{\"temp\":296.52,\"feels_like\":296.19,\"temp_min\":296.52,\"temp_max\":296.52,\"pressure\":1020,\"sea_level\":1020,\"grnd_level\":1009,\"humidity\":49,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":2.07,\"deg\":236,\"gust\":4.82},\"visibility\":10000,\"pop\":0.21,\"rain\":{\"3h\":0.18},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-13 15:00:00\"},{\"dt\":1757786400,\"main\":{\"temp\":291.06,\"feels_like\":290.94,\"temp_min\":291.06,\"temp_max\":291.06,\"pressure\":1020,\"sea_level\":1020,\"grnd_level\":1009,\"humidity\":78,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":2.72,\"deg\":37,\"gust\":4.2},\"visibility\":10000,\"pop\":0.45,\"rain\":{\"3h\":0.26},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-13 18:00:00\"},{\"dt\":1757797200,\"main\":{\"temp\":291.76,\"feels_like\":291.4,\"temp_min\":291.76,\"temp_max\":291.76,\"pressure\":1019,\"sea_level\":1019,\"grnd_level\":1008,\"humidity\":66,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.28,\"deg\":148,\"gust\":10.25},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-13 21:00:00\"},{\"dt\":1757808000,\"main\":{\"temp\":289.78,\"feels_like\":289.48,\"temp_min\":289.78,\"temp_max\":289.78,\"pressure\":1018,\"sea_level\":1018,\"grnd_level\":1007,\"humidity\":76,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":99},\"wind\":{\"speed\":2.4,\"deg\":126,\"gust\":6.2},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-14 00:00:00\"},{\"dt\":1757818800,\"main\":{\"temp\":289.24,\"feels_like\":289.1,\"temp_min\":289.24,\"temp_max\":289.24,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":1006,\"humidity\":84,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":85},\"wind\":{\"speed\":3.08,\"deg\":113,\"gust\":6.91},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-14 03:00:00\"},{\"dt\":1757829600,\"main\":{\"temp\":290.02,\"feels_like\":289.96,\"temp_min\":290.02,\"temp_max\":290.02,\"pressure\":1016,\"sea_level\":1016,\"grnd_level\":1005,\"humidity\":84,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":90},\"wind\":{\"speed\":3.53,\"deg\":123,\"gust\":7.24},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-14 06:00:00\"},{\"dt\":1757840400,\"main\":{\"temp\":294.49,\"feels_like\":294.27,\"temp_min\":294.49,\"temp_max\":294.49,\"pressure\":1014,\"sea_level\":1014,\"grnd_level\":1003,\"humidity\":61,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":4.84,\"deg\":137,\"gust\":8.33},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-14 09:00:00\"},{\"dt\":1757851200,\"main\":{\"temp\":298.94,\"feels_like\":298.75,\"temp_min\":298.94,\"temp_max\":298.94,\"pressure\":1012,\"sea_level\":1012,\"grnd_level\":1001,\"humidity\":45,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":5.44,\"deg\":171,\"gust\":9.2},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-14 12:00:00\"},{\"dt\":1757862000,\"main\":{\"temp\":292.29,\"feels_like\":292.35,\"temp_min\":292.29,\"temp_max\":292.29,\"pressure\":1013,\"sea_level\":1013,\"grnd_level\":1001,\"humidity\":80,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.63,\"deg\":220,\"gust\":8.48},\"visibility\":10000,\"pop\":1,\"rain\":{\"3h\":1.47},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-14 15:00:00\"},{\"dt\":1757872800,\"main\":{\"temp\":290.59,\"feels_like\":290.74,\"temp_min\":290.59,\"temp_max\":290.59,\"pressure\":1014,\"sea_level\":1014,\"grnd_level\":1002,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.44,\"deg\":170,\"gust\":7.92},\"visibility\":10000,\"pop\":1,\"rain\":{\"3h\":1.95},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-14 18:00:00\"},{\"dt\":1757883600,\"main\":{\"temp\":289.58,\"feels_like\":289.63,\"temp_min\":289.58,\"temp_max\":289.58,\"pressure\":1014,\"sea_level\":1014,\"grnd_level\":1003,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":4.27,\"deg\":201,\"gust\":7.6},\"visibility\":10000,\"pop\":0.29,\"rain\":{\"3h\":0.25},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-14 21:00:00\"},{\"dt\":1757894400,\"main\":{\"temp\":287.78,\"feels_like\":287.65,\"temp_min\":287.78,\"temp_max\":287.78,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1004,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":5.18,\"deg\":270,\"gust\":9.21},\"visibility\":10000,\"pop\":0.25,\"rain\":{\"3h\":0.13},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-15 00:00:00\"},{\"dt\":1757905200,\"main\":{\"temp\":287.19,\"feels_like\":286.97,\"temp_min\":287.19,\"temp_max\":287.19,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":1006,\"humidity\":89,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.86,\"deg\":258,\"gust\":8.59},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-15 03:00:00\"},{\"dt\":1757916000,\"main\":{\"temp\":287.02,\"feels_like\":286.68,\"temp_min\":287.02,\"temp_max\":287.02,\"pressure\":1018,\"sea_level\":1018,\"grnd_level\":1007,\"humidity\":85,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":81},\"wind\":{\"speed\":3.73,\"deg\":250,\"gust\":6.27},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-15 06:00:00\"},{\"dt\":1757926800,\"main\":{\"temp\":291.73,\"feels_like\":291.11,\"temp_min\":291.73,\"temp_max\":291.73,\"pressure\":1019,\"sea_level\":1019,\"grnd_level\":1007,\"humidity\":56,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"clouds\":{\"all\":19},\"wind\":{\"speed\":3.45,\"deg\":233,\"gust\":4.71},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-15 09:00:00\"},{\"dt\":1757937600,\"main\":{\"temp\":294.84,\"feels_like\":294.08,\"temp_min\":294.84,\"temp_max\":294.84,\"pressure\":1018,\"sea_level\":1018,\"grnd_level\":1007,\"humidity\":39,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":49},\"wind\":{\"speed\":4.4,\"deg\":215,\"gust\":6.13},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-15 12:00:00\"},{\"dt\":1757948400,\"main\":{\"temp\":295.11,\"feels_like\":294.33,\"temp_min\":295.11,\"temp_max\":295.11,\"pressure\":1016,\"sea_level\":1016,\"grnd_level\":1005,\"humidity\":37,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"clouds\":{\"all\":24},\"wind\":{\"speed\":4.77,\"deg\":206,\"gust\":7.25},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-15 15:00:00\"},{\"dt\":1757959200,\"main\":{\"temp\":292.16,\"feels_like\":291.32,\"temp_min\":292.16,\"temp_max\":292.16,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":1006,\"humidity\":46,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":53},\"wind\":{\"speed\":3.95,\"deg\":197,\"gust\":9.87},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-15 18:00:00\"},{\"dt\":1757970000,\"main\":{\"temp\":291.49,\"feels_like\":290.69,\"temp_min\":291.49,\"temp_max\":291.49,\"pressure\":1016,\"sea_level\":1016,\"grnd_level\":1005,\"humidity\":50,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":4.46,\"deg\":190,\"gust\":10.95},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-15 21:00:00\"},{\"dt\":1757980800,\"main\":{\"temp\":289.98,\"feels_like\":289.42,\"temp_min\":289.98,\"temp_max\":289.98,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1004,\"humidity\":65,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":59},\"wind\":{\"speed\":4.07,\"deg\":202,\"gust\":11.97},\"visibility\":10000,\"pop\":0.2,\"rain\":{\"3h\":0.11},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-16 00:00:00\"},{\"dt\":1757991600,\"main\":{\"temp\":289.11,\"feels_like\":288.77,\"temp_min\":289.11,\"temp_max\":289.11,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1003,\"humidity\":77,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":20},\"wind\":{\"speed\":4.07,\"deg\":216,\"gust\":10.9},\"visibility\":10000,\"pop\":0.2,\"rain\":{\"3h\":0.12},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-16 03:00:00\"},{\"dt\":1758002400,\"main\":{\"temp\":290.04,\"feels_like\":289.66,\"temp_min\":290.04,\"temp_max\":290.04,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1004,\"humidity\":72,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":60},\"wind\":{\"speed\":4.79,\"deg\":242,\"gust\":11.42},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-16 06:00:00\"},{\"dt\":1758013200,\"main\":{\"temp\":293.58,\"feels_like\":292.78,\"temp_min\":293.58,\"temp_max\":293.58,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1004,\"humidity\":42,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":2},\"wind\":{\"speed\":6.71,\"deg\":256,\"gust\":10.72},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-16 09:00:00\"},{\"dt\":1758024000,\"main\":{\"temp\":295.05,\"feels_like\":294.18,\"temp_min\":295.05,\"temp_max\":295.05,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1004,\"humidity\":34,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"clouds\":{\"all\":17},\"wind\":{\"speed\":7,\"deg\":255,\"gust\":10.38},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-16 12:00:00\"},{\"dt\":1758034800,\"main\":{\"temp\":293.7,\"feels_like\":292.8,\"temp_min\":293.7,\"temp_max\":293.7,\"pressure\":1014,\"sea_level\":1014,\"grnd_level\":1003,\"humidity\":38,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":97},\"wind\":{\"speed\":5.73,\"deg\":261,\"gust\":10.62},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-16 15:00:00\"},{\"dt\":1758045600,\"main\":{\"temp\":291,\"feels_like\":290.09,\"temp_min\":291,\"temp_max\":291,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1004,\"humidity\":48,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":98},\"wind\":{\"speed\":4.49,\"deg\":259,\"gust\":9.19},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-16 18:00:00\"},{\"dt\":1758056400,\"main\":{\"temp\":288.7,\"feels_like\":287.85,\"temp_min\":288.7,\"temp_max\":288.7,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1004,\"humidity\":59,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.8,\"deg\":246,\"gust\":9.64},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-16 21:00:00\"},{\"dt\":1758067200,\"main\":{\"temp\":288.28,\"feels_like\":287.28,\"temp_min\":288.28,\"temp_max\":288.28,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1004,\"humidity\":55,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":97},\"wind\":{\"speed\":4.65,\"deg\":246,\"gust\":10.69},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-17 00:00:00\"},{\"dt\":1758078000,\"main\":{\"temp\":287.63,\"feels_like\":286.73,\"temp_min\":287.63,\"temp_max\":287.63,\"pressure\":1014,\"sea_level\":1014,\"grnd_level\":1003,\"humidity\":61,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":4.18,\"deg\":248,\"gust\":9.65},\"visibility\":10000,\"pop\":0.2,\"rain\":{\"3h\":0.12},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-09-17 03:00:00\"},{\"dt\":1758088800,\"main\":{\"temp\":287.18,\"feels_like\":286.23,\"temp_min\":287.18,\"temp_max\":287.18,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1004,\"humidity\":61,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":69},\"wind\":{\"speed\":5.36,\"deg\":255,\"gust\":10.24},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-17 06:00:00\"},{\"dt\":1758099600,\"main\":{\"temp\":290.58,\"feels_like\":289.55,\"temp_min\":290.58,\"temp_max\":290.58,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":1003,\"humidity\":45,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":1},\"wind\":{\"speed\":6.5,\"deg\":265,\"gust\":9.24},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-09-17 09:00:00\"}],\"city\":{\"id\":756135,\"name\":\"Warsaw\",\"coord\":{\"lat\":52.2298,\"lon\":21.0118},\"country\":\"PL\",\"population\":1000000,\"timezone\":7200,\"sunrise\":1757649931,\"sunset\":1757696356}}";
            var dataModel = JsonSerializer.Deserialize<ForecastModel>(json, new JsonSerializerOptions
            {
                PropertyNameCaseInsensitive = true
            });
            Assert.IsNotNull(dataModel);
            Assert.AreEqual(dataModel.cod, "200");
            Assert.IsTrue(dataModel.list.Count > 0);
            foreach (var forecast in dataModel.list)
            {
                Assert.IsTrue(forecast.main.temp_max >= forecast.main.temp_min);
            }
        }

        [TestMethod()]
        public void parseHistoryData()
        {
            string json = "[{\"id\":3,\"city_id\":3,\"dt\":1757660332,\"icon\":\"01d\",\"main_weather\":\"Clear\",\"description\":\"clear sky\",\"temp\":289.8900146484375,\"temp_min\":289.0299987792969,\"temp_max\":290.8699951171875,\"humidity\":86,\"pressure\":1017,\"cloud_cover\":-1,\"wind_speed\":3.0899999141693115,\"wind_deg\":260,\"sun_rise\":1757649931,\"sun_set\":1757696356},{\"id\":6,\"city_id\":3,\"dt\":1757663719,\"icon\":\"02d\",\"main_weather\":\"Clouds\",\"description\":\"few clouds\",\"temp\":292.0899963378906,\"temp_min\":290.8399963378906,\"temp_max\":293.6099853515625,\"humidity\":79,\"pressure\":1017,\"cloud_cover\":-1,\"wind_speed\":3.0899999141693115,\"wind_deg\":290,\"sun_rise\":1757649931,\"sun_set\":1757696356},{\"id\":9,\"city_id\":3,\"dt\":1757667328,\"icon\":\"02d\",\"main_weather\":\"Clouds\",\"description\":\"few clouds\",\"temp\":293.5299987792969,\"temp_min\":292.54998779296875,\"temp_max\":294.6400146484375,\"humidity\":70,\"pressure\":1017,\"cloud_cover\":-1,\"wind_speed\":1.5399999618530273,\"wind_deg\":0,\"sun_rise\":1757649931,\"sun_set\":1757696356}]";

            var dataModel = JsonSerializer.Deserialize<List<HistoryModel>>(json, new JsonSerializerOptions
            {
                PropertyNameCaseInsensitive = true
            });
            Assert.IsNotNull(dataModel);
            Assert.IsTrue(dataModel.Count > 0);
            foreach (var hist in dataModel)
            {
                Assert.IsFalse(hist.main_weather.IsNullOrEmpty());
                Assert.IsTrue(hist.temp_max >= hist.temp_min);
            }


        }
    }
}